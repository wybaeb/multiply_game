# Музыкальная система игры

## Описание

Реализована полноценная музыкальная система для игры "Таблица умножения" с поддержкой различных треков для разных состояний игры.

## Функциональность

### Треки музыки

1. **bg1.mp3** - Основная музыка
   - Играет в главном меню
   - Играет во время обычной игры (между боями)

2. **catch.mp3** - Музыка монстра
   - Включается при появлении монстра
   - Играет во время боя

3. **win.mp3** - Музыка победы
   - Включается при правильном ответе
   - Играет во время анимации победы

### Особенности

- **Зацикливание**: Все треки автоматически повторяются
- **Плавные переходы**: Музыка меняется в зависимости от состояния игры
- **Управление громкостью**: Настраиваемая громкость (0-100%)
- **Включение/выключение**: Кнопка в меню для управления музыкой
- **Автопауза**: Музыка автоматически останавливается при скрытии вкладки

## Техническая реализация

### Файлы

- `js/music.js` - Основной модуль музыкальной системы
- `test_music.html` - Тестовый файл для проверки работы музыки

### Интеграция

Музыкальная система интегрирована в основные модули игры:

1. **game.js** - Управление музыкой в зависимости от состояния игры
2. **ui.js** - Кнопка управления музыкой в меню
3. **index.html** - Подключение музыкального модуля

### Состояния музыки

- `menu` - Музыка главного меню
- `game` - Музыка во время игры
- `monster` - Музыка при появлении монстра
- `victory` - Музыка победы

## Использование

### В коде

```javascript
// Воспроизведение музыки меню
window.musicManager.playMenuMusic();

// Воспроизведение музыки игры
window.musicManager.playGameMusic();

// Воспроизведение музыки монстра
window.musicManager.playMonsterMusic();

// Воспроизведение музыки победы
window.musicManager.playVictoryMusic();

// Остановка всей музыки
window.musicManager.stopAllMusic();

// Включение/выключение музыки
window.musicManager.toggleMusic();

// Установка громкости (0-1)
window.musicManager.setVolume(0.5);
```

### В игре

1. **Главное меню**: Автоматически играет bg1.mp3
2. **Начало игры**: Переключается на bg1.mp3 (игровая версия)
3. **Появление монстра**: Переключается на catch.mp3
4. **Правильный ответ**: Переключается на win.mp3
5. **Возврат к игре**: Возвращается к bg1.mp3
6. **Возврат в меню**: Возвращается к bg1.mp3 (меню)

## Тестирование

Для тестирования музыкальной системы используйте файл `test_music.html`:

1. Откройте `test_music.html` в браузере
2. Используйте кнопки для тестирования различных треков
3. Настройте громкость с помощью слайдера
4. Проверьте включение/выключение музыки

## Совместимость

- Поддерживает все современные браузеры
- Автоматическая обработка ошибок воспроизведения
- Graceful fallback при отсутствии аудио поддержки 